<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Carrito - Phoenix Store</title>
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body>

<header>
    <div class="header-left">Phoenix Store</div>
    <div class="search-container">
        <form id="busquedaForm">
            <label for="queryInput"></label><input id="queryInput" name="query" placeholder="Buscar productos..."
                                                   type="text">
            <button type="submit">Buscar</button>
        </form>
    </div>
    <div class="header-right">
        <button onclick="window.location.href='/home'">Seguir comprando</button>
    </div>
</header>

<main style="width: 80%; margin-top: 30px;">
    <h2>Carrito de Compras</h2>

    <div th:if="${carrito == null or #lists.isEmpty(carrito)}">
        <p>Tu carrito está vacío.</p>
    </div>

    <table style="width: 100%; border-collapse: collapse;" th:if="${carrito != null and !#lists.isEmpty(carrito)}">
        <thead>
        <tr style="background-color: #ff6600; color: white;">
            <th style="padding: 10px;">Producto</th>
            <th style="padding: 10px;">Precio</th>
            <th style="padding: 10px;">Cantidad</th>
            <th style="padding: 10px;">Subtotal</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${carrito}">
            <td style="padding: 10px;" th:text="${item.nombre}"></td>
            <td style="padding: 10px;" th:text="${item.precio}"></td>
            <td style="padding: 10px;" th:text="${item.cantidad}"></td>
            <td style="padding: 10px;" th:text="${item.precio * item.cantidad}"></td>
        </tr>
        </tbody>

    </table>

    <div style="text-align: right; margin-top: 20px;" th:if="${carrito != null and !#lists.isEmpty(carrito)}">
        <h3>Total: $<span th:text="${total}"></span></h3>
        <button style="background-color: #ff6600; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
            Finalizar compra
        </button>
    </div>
</main>

<script>
    document.getElementById('busquedaForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const query = document.getElementById('queryInput').value;
        if (query.trim() !== '') {
            window.location.href = '/home?query=' + encodeURIComponent(query);
        }
    });
</script>

</body>
</html>
